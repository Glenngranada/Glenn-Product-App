<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="furkan-logo.jpg" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />

    <!-- <script src="jschannel.js" /> -->

    <script>
      // function getProductsFromIndecDB() {
      //     return new Promise((resolve, reject) => {
      //         // Open a connection to the IndexedDB database
      //         let data = localStorage.getItem("products");
      //         let parsedData = data ? JSON.parse(data) : [];
      //         resolve(parsedData)
              
      //     });
      // }
      // let products = getProductsFromIndecDB()
      //   .then(products => {
      //       console.log('Products:', products);

      //       var chan = Channel.build({window: window.parent, origin: "*", scope: "testScope"});

      //       chan.bind("reverse", function(trans, s) {
      //         console.log(products, 'products')
      //         return products;
      //       });
      //       return products;
      //   })
      //   .catch(error => {
      //       console.error('Error:', error);
      //   });
      function initListeners(){
        function receiveMessage(event){
          console.log("Message received from the parent: " + event.data); // Message received from parent
          let data = localStorage.getItem("products");
          window.parent.postMessage(data, "*");
          window.removeEventListener('message',receiveMessage)
        }
        window.addEventListener('message',receiveMessage);
        // window.removeEventListener('message',receiveMessage);
        
      }
      

  </script>

    <title>Stock App</title>
  </head>
  <body onload="initListeners()">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
